# RScandir

Recursively scan a directory while not blocking processor resources.

[![Build Status][travis-image]][travis-url] [![Coverage Status][coveralls-image]][coveralls-url]

![Ambassador IO Logo](https://raw.githubusercontent.com/mgwhitfield/AmbassadorNode/master/logo-icon-64.PNG)

[travis-image]: https://travis-ci.org/spiritway/rscandir.png?branch=master
[travis-url]: https://travis-ci.org/spiritway/rscandir

[coveralls-image]: https://coveralls.io/repos/spiritway/rscandir/badge.svg
[coveralls-url]: https://coveralls.io/repos/spiritway/rscandir/badge.svg

## Rationale

Development outside of IDE's are typically done within the OS filesystem.  Organizing configuration and data files on the filesystem is the simplest way to segment units of information.  Therefore, having a fast way to access those files is important without incurring heavy filesystem costs of kernal-layer stats and syncronous and blocking behavior.

## Implementation Concepts

Leveraging scandir, kernel-layer stats are avoided.  By allowing both syncronous and asynchronous versions of rscandir, the developer can 100% avoid synchronous and blocking behavior.  Additional optimizations include caching, warning messages, and monitoring of CPU resources.

## Usage

Use ``require('spiritrscandir')(folderName)`` to retrieve an array of filenames given **folderName**.

### Caching

If your **folderName** contains many files or many directories, you will be given a warning message to use ``SpiritRScandir.batchRead``.  To use this function, include the **SpiritRscandir** package and call **batchRead** on program startup: ``require('spiritrscandir/spiritrscandir.class.js').batchRead(fromFolder);``.  This will retrieve the contents required by rscandir in advance of your program calling rscandir.  If the contents of the rscandir are too big or your memory is over the configured threshold (***default is 5mb***), then the contents of the cached rscandir read shall be stored in the filesystem.

### Current Todo List

* Perf
* CPU-based read delays

### Advanced Usage

Additional API's are available for manipulation.  Please contact the author directly for support.  Advanced concepts may include:

* Configuring the sort strategy (DEPTH_FIRST or ALPHABETICAL)
* Is cache stored in memory or filesystem?
* How large is the memory buffer?
* Setting cache thresholds
* Setting folder specific cache settings