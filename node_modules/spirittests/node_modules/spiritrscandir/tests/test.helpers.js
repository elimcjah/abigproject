"use strict";

class SpiritRScandirTestHelpers {
    constructor() {
        this.fs = require('fs');
        this.rimraf = require('rimraf');
    }
    createFiles() {
        let cwd;
        cwd = process.cwd();
        process.chdir(__dirname + '/../');

        if (!this.fs.existsSync('spiritrscandirFiles')) {
            this.fs.mkdirSync('spiritrscandirFiles');
        }

        this.fs.writeFileSync('spiritrscandirFiles/a.json', '{"a": "b"}');
        this.fs.writeFileSync('spiritrscandirFiles/z.json', '{"b": "c"}');
        process.chdir('spiritrscandirFiles');
        if (!this.fs.existsSync('subdir')){
            this.fs.mkdirSync('subdir');
        }
        this.fs.writeFileSync('subdir/a.json',
            '{"a": "b"}');
            
        process.chdir(__dirname + '/../');

        if (!this.fs.existsSync('node_modules')){
            this.fs.mkdirSync('node_modules');
        }
        process.chdir('node_modules');
        if (!this.fs.existsSync('spiritrscandirFilesTestModule')){
            this.fs.mkdirSync('spiritrscandirFilesTestModule');
        }
        process.chdir('spiritrscandirFilesTestModule');
        this.fs.mkdirSync('node_modules');
        this.fs.mkdirSync('spiritrscandirFiles');
        this.fs.writeFileSync('spiritrscandirFiles/a.json',
            '{"a": "123", "b": "c"}');
        this.fs.writeFileSync('spiritrscandirFiles/z.json',
            '{"a": "234", "b": "d"}');
        process.chdir('node_modules');
        this.fs.mkdirSync('nestedFolder');
        process.chdir('nestedFolder');
        this.fs.writeFileSync('a.json',
            '{"b": "d", "c": "d"}');
        this.fs.mkdirSync('spiritrscandirFiles');
        this.fs.writeFileSync('spiritrscandirFiles/a.json',
            '{"b": "d", "c": "d"}');
        this.fs.writeFileSync('spiritrscandirFiles/z.json',
            '{"b": "123", "c": "234"}');
        this.fs.mkdirSync('node_modules');
        process.chdir('node_modules');
        this.fs.mkdirSync('nestedFolder');
        process.chdir('nestedFolder');
        this.fs.mkdirSync('spiritrscandirFiles');
        this.fs.writeFileSync('spiritrscandirFiles/a.json',
            '{"b": "e", "c": "f"}');
        process.chdir(__dirname + '/../');
        process.chdir(cwd);
    }

    cleanupFiles() {
        let cwd;
        cwd = process.cwd();
        process.chdir(__dirname + '/../');
        this.rimraf.sync('spiritrscandirFiles');
        this.rimraf.sync('node_modules/spiritrscandirFilesTestModule');
        process.chdir(cwd);
    }
}
module.exports = new SpiritRScandirTestHelpers();