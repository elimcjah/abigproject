var urlParse = require('url-parse');
module.exports = {
	'fn': function(str){
		if ( str.substr(str.length-1) == "/" )
			str	= str.substr(0,str.length-1)
		if ( str.substr(0,"::ffff:".length) == "::ffff:" )
			str	= str.substr("::ffff:".length);
		if ( str.split('://').length == 1 )
			str	= "http://"+str;
		sarr	= str.split('://');
		protocol	= sarr.shift();
		sarr[0]	= sarr[0].replace(/\/\//g,'/');
		str	= protocol+"://"+sarr[0];
		return str;
	},
	'test': function(fn, done) {
		expect(fn('::ffff:127.0.0.1')).toBe('http://127.0.0.1');
		expect(fn('http://localhost:8000/'));
		console.log(urlParse('//localhost:8000'));
		console.log(fn('http://localhost:8000/path/#'));
		console.log(fn('//localhost:8000/path/#'));
		console.log(fn('https://localhost:8000/path'));
		console.log(fn('127.0.0.1:8000/path'));
		done();
	},
	'description': 'converts ipv6 urls and generic URL\'s to a similar format'
}