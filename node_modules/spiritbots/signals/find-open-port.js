module.exports = function(host, startPort, endPort){
	var ps, self, signal;

    if (!startPort) {
        startPort = 3000;
    }
    if (!endPort) {
        endPort = 3100;
    }

	ps	= require('portscanner');
	self = this;
	signal	= this.wait();

    // first establish that the hostnameost is reachable
    url    = this.answer('url-parts',host);

    ps.findAPortNotInUse(startPort, endPort, url.hostname, function(error, port) {
        self.finish(signal, port);
    });
    return signal;
};